<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NutriScan | My Diary</title>
    <link rel="stylesheet" href="home.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        .diary-container { padding: 40px 8%; max-width: 850px; margin: 0 auto; }
        
        /* Goal Progress Tracking Grid */
        .goal-dashboard {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        .goal-card {
            background: white; padding: 20px; border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
        }
        .progress-item { margin-bottom: 15px; }
        .progress-label { display: flex; justify-content: space-between; font-size: 0.85rem; font-weight: 600; margin-bottom: 4px; }
        .progress-bar-bg { width: 100%; height: 10px; background: #eee; border-radius: 10px; overflow: hidden; }
        .progress-fill { height: 100%; width: 0%; background: #4CAF50; transition: width 0.5s ease; }
        .over-limit { background: #ff4d4d !important; }

        /* Summary Cards */
        .summary-card {
            background: #fff; padding: 20px; border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05); margin-bottom: 30px;
            display: grid; grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
            gap: 15px; text-align: center;
        }
        .summary-item h4 { color: #4CAF50; font-size: 1.1rem; }

        /* Entries */
        .log-entry {
            background: white; padding: 15px 20px; border-radius: 12px;
            margin-bottom: 12px; display: flex; justify-content: space-between;
            align-items: center; border-left: 5px solid #4CAF50;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }
        .btn-delete {
            background: #fff5f5; color: #ff4d4d; border: 1px solid #ff4d4d;
            padding: 4px 8px; border-radius: 5px; cursor: pointer; font-size: 0.75rem;
        }

        /* History */
        .history-controls { display: flex; align-items: center; gap: 15px; margin: 20px 0; }
        .btn-history { flex: 1; padding: 12px; background: #f0f0f0; border: none; border-radius: 10px; cursor: pointer; font-weight: 600; }
        #filterSection { display: none; align-items: center; gap: 10px; }
        #historyWrapper { display: none; }
        .date-header { margin: 25px 0 10px; color: #666; font-size: 1rem; border-bottom: 1px solid #eee; }
        input[type="date"] { padding: 8px; border-radius: 8px; border: 1px solid #ddd; }
    </style>
</head>
<body>
    <nav class="navbar">
    <div class="nav-container">
        <div class="logo">Nutri<span>Scan</span></div>
        
        <div class="menu-toggle" id="mobile-menu">
            <span class="bar"></span>
            <span class="bar"></span>
            <span class="bar"></span>
        </div>

        <ul class="nav-links" id="nav-list">
            <li class="user-greeting">Hi, <span id="userNameDisplay">Guest</span>!</li>
            <li><a href="home.html">Home</a></li>
            <li><a href="dashboard.html">My Profile</a></li>
            <li><a href="diary.html">Diary</a></li>
            <li><button id="logoutBtn" class="btn-logout">Logout</button></li>
        </ul>
    </div>
</nav>

    <div class="diary-container">
        <h1>Nutritional Tracker</h1>

        <div class="goal-dashboard" id="goalDashboard" style="display: none;">
            <div class="goal-card">
                <h3>Calorie Goal</h3>
                <div class="progress-item">
                    <div class="progress-label"><span>Progress</span><span id="label-cal">0 / 0 kcal</span></div>
                    <div class="progress-bar-bg"><div id="bar-cal" class="progress-fill"></div></div>
                </div>
                <p id="hint-cal" style="font-size: 0.8rem; color: #666;"></p>
            </div>

            <div class="goal-card">
                <h3>Macros & Fiber</h3>
                <div class="progress-item">
                    <div class="progress-label"><span>Protein</span><span id="label-pro">0 / 0g</span></div>
                    <div class="progress-bar-bg"><div id="bar-pro" class="progress-fill"></div></div>
                </div>
                <div class="progress-item">
                    <div class="progress-label"><span>Fats</span><span id="label-fat">0 / 0g</span></div>
                    <div class="progress-bar-bg"><div id="bar-fat" class="progress-fill"></div></div>
                </div>
                <div class="progress-item">
                    <div class="progress-label"><span>Fiber</span><span id="label-fib">0 / 0g</span></div>
                    <div class="progress-bar-bg"><div id="bar-fib" class="progress-fill"></div></div>
                </div>
            </div>
        </div>

        <h2>Today's Summary</h2>
        <div class="summary-card">
            <div class="summary-item"><p>Calories</p><h4 id="totalCals">0</h4></div>
            <div class="summary-item"><p>Protein</p><h4 id="totalProtein">0g</h4></div>
            <div class="summary-item"><p>Fats</p><h4 id="totalFats">0g</h4></div>
            <div class="summary-item"><p>Fiber</p><h4 id="totalFiber">0g</h4></div>
        </div>

        <div id="todayLogs"></div>

        <div class="history-controls">
            <button class="btn-history" id="toggleHistory">View History</button>
            <div id="filterSection">
                <input type="date" id="dateFilter">
            </div>
        </div>
        <div id="historyWrapper"></div>
    </div>

    <script type="module" src="diary.js"></script>
</body>
</html>